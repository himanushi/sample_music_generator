/*! https://himakan.net/tool/apple-music-generator MIT license */var amg={};!function(){"use strict";function t(){$.getJSON(h,x,function(t,e){$.each(t.results,function(t,e){_.append(u(e)),amg.result_list.push(e)}),n(v+k)})}function e(t){x.attribute=amg.attribute=t}function n(t){x.offset=v=t}function r(){i(),a(""),o(),c()}function i(){amg.result_list=[]}function a(t){x.term=t}function o(){x.offset=v=0}function c(){_.children().remove()}function u(t){return $("<div>",{"data-song-no":amg.result_list.length}).append($("<img>",{src:t.artworkUrl100})).append($("<p>",{text:"アーティスト名:"+t.artistName})).append($("<p>",{text:"アルバム名:"+t.collectionName})).append($("<p>",{text:"曲名:"+t.trackName})).click(function(t){s(t.currentTarget)})}function s(t){var e=$("#generator"),n=$("#preview"),r=l(amg.result_list[t.dataset.songNo]);e.children().remove(),e.append($("<textarea>",{id:"generator_text",text:r.prop("outerHTML").replace(/&amp;/g,"&")})),n.children().remove(),n.append(r),$("#copy").css("display","inline").text("コピー")}function l(t){return $("<iframe>",{src:f(g+t.trackId+d),frameborder:0}).attr("height","110px").attr("width","100%")}function f(t){var e=p();return $.cookie("affiliate_token",e),""===e?t:t+y+e}function p(){var t=$("#affiliate_token").val();return $.cookie("affiliate_token",t),t}function m(n,i){r(),e(n),a(i),$("#more").css("display","inline"),t()}var g="https://tools.applemusic.com/embed/v1/song/",d="?country=jp",h="https://itunes.apple.com/search",k=30,v=0,_=$("#results"),y="&at=",x={term:"",media:"music",entity:"song",attribute:"",country:"jp",lang:"ja_jp",offset:v,limit:k};amg.result_list=[],amg.attribute="",$("#artist").keypress(function(t){if(13===t.which)return m("artistTerm",t.target.value),!1}),$("#album").keypress(function(t){if(13===t.which)return m("albumTerm",t.target.value),!1}),$("#song").keypress(function(t){if(13===t.which)return m("songTerm",t.target.value),!1}),$("#more").click(function(){e(amg.attribute),t()}),$("#copy").click(function(){$("#generator_text").select(),document.execCommand("copy"),$("#copy").text("コピーしました！")}),$("#affiliate_token").val($.cookie("affiliate_token"))}();