/*! https://himakan.net/other/journal/sample-music-generator_album-ver MIT license */function searchResult(t){$.each(t.results,function(t,e){$("#results").append(aag.build_result(e)),aag.result_list.push(e)})}var aag={};!function(){"use strict";var t="https://itunes.apple.com/search",e=0,a=$("#results"),r="&at=",i={term:"",media:"music",entity:"song",attribute:"",country:"jp",lang:"ja_jp",offset:e,limit:30,callback:"searchResult"};function n(){var e=document.createElement("script");e.setAttribute("src",t+"?"+$.param(i)),document.head.appendChild(e),document.head.removeChild(e)}function o(t){i.attribute=aag.attribute=t}function l(){aag.result_list=[],c(""),i.offset=e=0,a.children().remove()}function c(t){i.term=t}function s(t,e){l(),o(t),c(e),$("#more").css("display","inline"),n()}aag.result_list=[],aag.attribute="",aag.set_params_offset=function(t){i.offset=e=t},aag.build_result=function(t){return $("<div>",{"data-song-no":aag.result_list.length}).append($("<img>",{src:t.artworkUrl100})).append($("<p>",{text:"アーティスト名:"+t.artistName})).append($("<p>",{text:"アルバム名:"+t.collectionName})).append($("<p>",{text:"曲名:"+t.trackName})).click(function(t){var e,a,i,n,o,l,c,s;e=t.currentTarget,a=$("#generator"),i=$("#preview"),o=aag.result_list[e.dataset.songNo],n=$("<iframe>").attr("allow","autoplay *; encrypted-media *;").attr("frameborder","0").attr("height","450").attr("style","width:100%;max-width:660px;overflow:hidden;background:transparent;").attr("sandbox","allow-forms allow-popups allow-same-origin allow-scripts allow-top-navigation-by-user-activation").attr("src",(l=o.trackViewUrl,s=$("#affiliate_token").val(),$.cookie("affiliate_token",s),c=s,l=l.replace("itunes.apple.com","embed.music.apple.com").replace(/\?.*/,"&app=music"),$.cookie("affiliate_token",c),""===c?l:l+r+c)),a.children().remove(),a.append($("<textarea>",{id:"generator_text",text:n.prop("outerHTML").replace(/&amp;/g,"&")})),i.children().remove(),i.append(n),$("#copy").css("display","inline").text("コピー")})},$("#artist").keypress(function(t){if(13===t.which)return s("artistTerm",t.target.value),!1}),$("#album").keypress(function(t){if(13===t.which)return s("albumTerm",t.target.value),!1}),$("#song").keypress(function(t){if(13===t.which)return s("songTerm",t.target.value),!1}),$("#more").click(function(){o(aag.attribute),n()}),$("#copy").click(function(){$("#generator_text").select(),document.execCommand("copy"),$("#copy").text("コピーしました！")}),$("#affiliate_token").val($.cookie("affiliate_token"))}();