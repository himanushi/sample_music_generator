/*! https://himakan.net/other/journal/sample-music-generator_album-ver MIT license */var aag={};!function(){"use strict";function t(){$.getJSON(h,x,function(t,e){$.each(t.results,function(t,e){_.append(u(e)),aag.result_list.push(e)}),n(v+k)})}function e(t){x.attribute=aag.attribute=t}function n(t){x.offset=v=t}function a(){i(),r(""),o(),c()}function i(){aag.result_list=[]}function r(t){x.term=t}function o(){x.offset=v=0}function c(){_.children().remove()}function u(t){return $("<div>",{"data-song-no":aag.result_list.length}).append($("<img>",{src:t.artworkUrl100})).append($("<p>",{text:"アーティスト名:"+t.artistName})).append($("<p>",{text:"アルバム名:"+t.collectionName})).append($("<p>",{text:"曲名:"+t.trackName})).click(function(t){s(t.currentTarget)})}function s(t){var e=$("#generator"),n=$("#preview"),a=l(aag.result_list[t.dataset.songNo]);e.children().remove(),e.append($("<textarea>",{id:"generator_text",text:a.prop("outerHTML").replace(/&amp;/g,"&")})),n.children().remove(),n.append(a),$("#copy").css("display","inline").text("コピー")}function l(t){return $("<iframe>",{src:f(g+t.collectionId+d),frameborder:0}).attr("height","500px").attr("width","100%")}function f(t){var e=p();return $.cookie("affiliate_token",e),""===e?t:t+y+e}function p(){var t=$("#affiliate_token").val();return $.cookie("affiliate_token",t),t}function m(n,i){a(),e(n),r(i),$("#more").css("display","inline"),t()}var g="https://tools.applemusic.com/embed/v1/album/",d="?country=jp",h="https://itunes.apple.com/search",k=30,v=0,_=$("#results"),y="&at=",x={term:"",media:"music",entity:"song",attribute:"",country:"jp",lang:"ja_jp",offset:v,limit:k};aag.result_list=[],aag.attribute="",$("#artist").keypress(function(t){if(13===t.which)return m("artistTerm",t.target.value),!1}),$("#album").keypress(function(t){if(13===t.which)return m("albumTerm",t.target.value),!1}),$("#song").keypress(function(t){if(13===t.which)return m("songTerm",t.target.value),!1}),$("#more").click(function(){e(aag.attribute),t()}),$("#copy").click(function(){$("#generator_text").select(),document.execCommand("copy"),$("#copy").text("コピーしました！")}),$("#affiliate_token").val($.cookie("affiliate_token"))}();