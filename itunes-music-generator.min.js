/*! https://himakan.net/tool/itunes-music-generator MIT license */function searchResult(t){$.each(t.results,function(t,e){$("#results").append(img.build_result(e)),img.result_list.push(e)})}var img={};!function(){"use strict";var t="https://tools.applemusic.com/embed/v1/song/",e="?country=jp",i="https://itunes.apple.com/search",r=0,a=$("#results"),n="&at=",o={term:"",media:"music",entity:"song",attribute:"",country:"jp",lang:"ja_jp",offset:r,limit:30,callback:"searchResult"};function c(){var t=document.createElement("script");t.setAttribute("src",i+"?"+$.param(o)),document.head.appendChild(t),document.head.removeChild(t)}function s(t){o.attribute=img.attribute=t}function u(){img.result_list=[],l(""),o.offset=r=0,a.children().remove()}function l(t){o.term=t}function m(t,e){u(),s(t),l(e),$("#more").css("display","inline"),c()}img.result_list=[],img.attribute="",img.set_params_offset=function(t){o.offset=r=t},img.build_result=function(i){return $("<div>",{"data-song-no":img.result_list.length}).append($("<img>",{src:i.artworkUrl100})).append($("<p>",{text:"アーティスト名:"+i.artistName})).append($("<p>",{text:"アルバム名:"+i.collectionName})).append($("<p>",{text:"曲名:"+i.trackName})).click(function(i){var r,a,o,c,s,u,l,m;r=i.currentTarget,a=$("#generator"),o=$("#preview"),s=img.result_list[r.dataset.songNo],c=$("<iframe>",{src:(u=t+s.trackId+e,m=$("#affiliate_token").val(),$.cookie("affiliate_token",m),l=m,$.cookie("affiliate_token",l),""===l?u:u+n+l),frameborder:0}).attr("height","110px").attr("width","100%"),a.children().remove(),a.append($("<textarea>",{id:"generator_text",text:c.prop("outerHTML").replace(/&amp;/g,"&")})),o.children().remove(),o.append(c),$("#copy").css("display","inline").text("コピー")})},$("#artist").keypress(function(t){if(13===t.which)return m("artistTerm",t.target.value),!1}),$("#album").keypress(function(t){if(13===t.which)return m("albumTerm",t.target.value),!1}),$("#song").keypress(function(t){if(13===t.which)return m("songTerm",t.target.value),!1}),$("#more").click(function(){s(img.attribute),c()}),$("#copy").click(function(){$("#generator_text").select(),document.execCommand("copy"),$("#copy").text("コピーしました！")}),$("#affiliate_token").val($.cookie("affiliate_token"))}();